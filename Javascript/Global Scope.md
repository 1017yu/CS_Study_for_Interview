# 전역 스코프의 장단점

## 스코프(Scope)

### 지역 스코프(Local Scope)

자바스크립트에서 함수를 선언하면 함수를 선언할 때마다 새로운 스코프를 생성하게 된다.

그러므로 함수 몸체에 선언한 변수는 해당 함수 몸체 안에서만 접근할 수 있는데,

이걸 함수 스코프(function-scoped)라고 부른다. 함수 스코프가 바로 지역 스코프의 예라고 할 수 있다.

<img width="558" alt="image" src="https://github.com/FC-MINI-4/attendance-front/assets/83483378/060ba3d7-b7d6-488d-b497-09256a589218">

> 예상했다시피 `print()`의 console 결과는 `111`, 마지막 Line의 console은 `1`을 나타냄을 알 수 있다.

<br />

만약 print 함수 안에 변수 a의 선언을 지운다면 console엔 어떤 값이 출력될까?

1. `1`이 출력된다.
2. a가 선언되지 않았다는 `에러`를 반환한다.

<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />

<img width="568" alt="image" src="https://github.com/FC-MINI-4/attendance-front/assets/83483378/7441432f-10a1-4f98-b62d-cfec49a77586">

> 전역 스코프에 선언되어있는 a의 값인 1이 출력되었다!

이는 Scope Chain에 의해 일어나는 현상인데, 현재 자신의 scope에서 사용하고자 하는 변수가 없다면 Scope Chain을 통해 해당 변수를 찾게되고, 전역 스코프의 a가 출력되는 것이다.

---

### 전역 스코프의 장점

1. **전역적 접근성**: 전역 스코프에서 선언된 변수나 함수는 어디서든 접근할 수 있다. 그로 인해 위 예시에서 에러를 반환하지 않고, Scope Chain을 통해 찾은 전역 변수를 출력함으로써, 에러를 최소화 할 수 있다.

2. **공유성**: 여러 함수나 모듈 사이에서 데이터를 공유할 때 유용하다. 전역 스코프에서 선언된 변수는 모든 함수에서 접근할 수 있어 데이터 공유가 간단하게 이루어진다.

### 전역 스코프의 단점

> 우리는 전역 스코프의 장점을 알아보기보다, 단점을 파고 들어 이를 극복하고 더욱 효율적인 코드 구성을 고민해야한다고 생각하기에, 단점을 위주로 파악해보겠다!

<br />

1. 생명주기와 메모리 관리: 전역 변수는 프로그램의 생명주기 동안 메모리를 점유하게 되고, 필요 이상으로 메모리 리소스를 소비한다.

- 암묵적 결합: 모든 코드가 전역 변수를 참조하고 변경할 수 있는 암묵적 결합(implicit coupling)을 허용

  👉🏻 해결: 즉시 실행 함수를 통해 변수를 지역 변수화하여 사용한다.

  ```javascript
  (function () {
    var foo = 10;
    // ...
  })();

  console.log(foo); // Reference Error
  ```

2. 보안 및 예측 불가능성: 전역 스코프에 있는 변수는 어디서든 접근 가능하기 때문에 보안상 취약할 수 있다. 또한, 어떤 부분에서 전역 변수가 수정될 수 있기 때문에 코드의 예측 불가능성이 증가할 수 있다.

- ❌ 전역 스코프의 잘못된 사용

  ```javascript
  let apiKey = '123.12.12.1';

  function fetchData() {
    // API 키를 사용하여 데이터를 가져옴
  }

  fetchData();
  ```

  이는 코드 어디서나 해당 키에 접근할 수 있음을 의미한다. 이는 보안에 취약하며, 누군가가 이 키를 알아내어 악용할 수 있다.

- 👉🏻 모듈화를 통한 해결

  ```javascript
  // api.ts
  const apiKey = '123.12.12.1';

  function fetchData() {
    // API 키를 사용하여 데이터를 가져옴
  }
  ```

  ```javascript
  // main.tsx
  import { fetchData } from './api.ts';

  fetchData();

  return (...)
  ```

  모듈 내부에서 변수나 함수는 외부에서 직접 접근할 수 없도록 보호된다.

  이를 통해 중요한 데이터나 코드가 외부로부터 보호되고 모듈 내부에서만 변수와 함수에 접근할 수 있으며, 외부에서는 해당 내부 구현을 직접 볼 수 없다.

  ***

  > 어차피 깃허브와 같은 저장소에 업로드되면 모듈화를 통한 보안만으로 보안성을 유지할 수 없잖아?

  사실 중요한 정보들을 코드 내부에 하드코딩하는 것이 보안적으로 좋은 접근은 아니고, 환경 변수 설정과 서버에서 값을 받아오거나 해싱을 통해 암호화를 하는 것이 더 좋은 보안성을 띈다.

---

### 결론

그럼에도 불구하고, 전역 스코프보다 지역 스코프를 통한 코드 관리의 필요성을 간과할 수 없다.

전역 스코프를 이용한 코드 관리보다, 지역 변수를 활용한 모듈화를 통해 안정성과 확장성을 유지하는 것이 코드의 캡슐화, 유지-보수성, 의존성 관리 등의 많은 이유로부터 지역 스코프를 사용할 근거가 생긴다.
