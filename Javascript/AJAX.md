# AJAX

![image](https://github.com/1017yu/this-is-money/assets/83483378/25d2c48b-73e3-4463-8e27-d3b0f3255ff0)

## 정의

자바스크립트를 이용해 서버와 브라우저가 <span style='color:hotpink'>비동기</span> 방식으로 데이터를 교환할 수 있는 통신 기능

브라우저가 가지고있는 XMLHttpRequest 객체를 이용해서 전체 페이지를 새로 고치지 않고도 페이지의 일부만을 위한 데이터를 로드하는 기법

즉, 쉽게 말하자면 자바스크립트를 통해서 서버에 데이터를 비동기 방식으로 요청하는 것이다.

---

### XMLHttpRequest란?

웹 브라우저에서 사용되는 JavaScript 객체로, 웹 페이지와 서버 간의 데이터를 비동기적으로 전송하고 받는 데 사용된다.

이 객체는 웹 애플리케이션에서 서버와 상호작용하며 데이터를 가져오거나 보낼 수 있는 기능을 제공

<br />
<br />
<br />
<br />

## 비동기 방식이란?

![image](https://github.com/1017yu/this-is-money/assets/83483378/9ba4d718-14c6-44ad-b86d-5ecef69c0f16)

비동기 방식은 웹페이지를 리로드하지 않고 데이터를 불러오는 방식.

Ajax를 통해서 서버에 요청을 한 후 멈추어 있는 것이 아니라 그 프로그램은 계속 돌아간다는 의미를 내포하고 있다.

### 비동기 방식의 <span style='color:lightblue'>장점</span>

페이지 리로드의 경우 전체 리소스를 다시 불러와야하는데

이미지, 스크립트 , 기타 코드등을 모두 재요청할 경우 불필요한 리소스 낭비가 발생하게 되지만

<span style='color:lightblue'>비동기식 방식을 이용할 경우 필요한 부분만 불러와 사용할 수 있으므로 매우 큰 장점이 있다.</span>

<br />
<br />
<br />
<br />

## AJAX를 사용하는 이유

![image](https://github.com/1017yu/this-is-money/assets/83483378/bc81b7bb-17b1-4f32-b05d-b3ebdfb66635)
![image](https://github.com/1017yu/this-is-money/assets/83483378/a7b8fa47-763b-41cb-b688-37f3a7f84982)

단순하게 WEB화면에서 무언가 부르거나 데이터를 조회하고 싶을 경우, 페이지 전체를 새로고침하지 않기 위해 사용한다고 볼 수 있다.

기본적으로 HTTP 프로토콜은 클라이언트쪽에서 Request를 보내고 서버쪽에서 Response를 받으면 이어졌던 연결이 끊기게 되어있다. 그래서 화면의 내용을 갱신하기 위해서는 다시 request를 하고 response를 하며 페이지 전체를 갱신하게 된다. 하지만 이렇게 할 경우, 엄청난 자원낭비와 시간낭비를 초래하고 말 것이다.

AJAX는 HTML 페이지 전체가 아닌 일부분만 갱신할 수 있도록 XMLHttpRequest객체를 통해 서버에 request한다. 이 경우, JSON이나 XML형태로 필요한 데이터만 받아 갱신하기 때문에 그만큼의 자원과 시간을 아낄 수 있다.

<br />
<br />
<br />
<br />

## AJAX의 장단점

### 1. AJAX의 장점

웹페이지의 속도향상
서버의 처리가 완료될 때까지 기다리지 않고 처리가 가능하다.
서버에서 Data만 전송하면 되므로 전체적인 코딩의 양이 줄어든다.

### 2. AJAX의 단점과 이를 극복한 fetchAPI

![image](https://github.com/1017yu/this-is-money/assets/83483378/0b3b383a-1fca-4bc6-9918-149508496b83)

#### 1. 히스토리 관리가 되지 않는다.

- ❌ AJAX 요청을 통한 데이터 통신은 URL이 변경되지 않아 브라우저 히스토리에 기록되지 않는다.

- ❌이로 인해 사용자가 뒤로가기나 앞으로가기 버튼을 사용하여 이전 상태로 돌아가는 것이 어렵다.

👉🏻 <span style='color:lightblue'>history.pushState()</span>를 활용하여 URL을 변경할 수 있기 때문에 페이지 이동 없이도 히스토리 관리가 가능

---

#### 2. 페이지 이동없는 통신으로 인한 보안상의 문제가 있다.

- ❌AJAX 요청은 페이지 전체를 로드하지 않고도 데이터를 주고받을 수 있어서, 악의적인 사용자가 자바스크립트를 이용하여 서버와 통신하거나, 사용자 데이터를 탈취하려는 시도를 할 수 있다.

👉🏻 <span style='color:lightblue'>CORS 헤더</span>를 통해 보안을 강화하며, Same-Site 쿠키 정책과 같은 추가적인 기능을 제공하여 보안성을 향상.

---

#### 3. 연속으로 데이터를 요청하면 서버 부하가 증가할 수 있다.

- ❌비동기적인 통신을 자주 반복하면 서버에 부하가 걸릴 수 있다. 이는 특히 대규모 사용자가 동시에 데이터를 요청하는 경우에 발생할 수 있다.

👉🏻 <span style='color:lightblue'>캐싱 및 스로틀링(요청 제한)</span>을 통해 서버 부하를 제어할 수 있는 기능을 제공

---

#### 4. XMLHttpRequest를 통해 통신하는 경우, 사용자에게 아무런 진행 정보가 주어지지 않는다.

- ❌AJAX 요청이 완료되기 전에 사용자는 요청이 진행 중인지 또는 완료되었는지 알기 어려울 수 있다.

👉🏻 fetch() 함수에서 반환하는 <span style='color:lightblue'>Promise</span> 비동기 통신의 진행 상황을 모니터링하고 응답 상태를 확인할 수 있다.

---

#### 5. HTTP 클라이언트의 기능이 한정되어 있다.

- ❌XMLHttpRequest는 기능이 제한적이기 때문에 다양한 요청 설정이나 응답 처리에 제한이 있다.

👉🏻 <span style='color:lightblue'>요청 헤더, 메서드, URL 매개변수 등을 쉽게 설정</span>

---

#### 6. 지원하는 Charset이 한정되어 있다.

- ❌XMLHttpRequest는 문자 인코딩을 처리하는 데 제한이 있다. 이로 인해 다양한 문자 집합과 인코딩을 처리하기 어려울 수 있다.

👉🏻 Response 객체 내부에서 <span style='color:lightblue'>text(), json(), blob() 등</span> 다양한 데이터 형식을 처리할 수 있는 기능을 제공하여 다양한 문자 인코딩을 처리할 수 있습니다

---

#### 7. 동일-출처 정책으로 인하여 다른 도메인과는 통신이 불가능하다. (Cross-Domain문제)

- ❌보안을 위해 다른 도메인 간의 AJAX 통신을 제한한다. 이로 인해 다른 도메인의 리소스를 요청할 때 CORS(Cross-Origin Resource Sharing) 헤더를 설정해야 한다.

👉🏻 Fetch API도 동일 출처 정책을 따르지만, Cross-Origin 요청의 경우 <span style='color:lightblue'>CORS 헤더를 통해</span> 다른 도메인과의 통신을 허용하거나 제어할 수 있다.

---

서버 측에서 CORS 헤더를 올바르게 설정하여 다른 도메인 간의 Fetch API 요청을 허용하도록 해야 한다.
브라우저는 이를 확인하고 서버의 허용 여부에 따라 요청을 처리한다.
