# Network

## HTTP의 GET과 POST 비교

### GET
<img width="796" alt="image" src="https://github.com/1017yu/Todo-doTalk/assets/83483378/8eba0096-fd2e-4fe3-92d4-6cbe07481bc8">

GET 방식은 요청하는 데이터가 [HTTP Request Message](https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages)의 Header 부분에 url 이 담겨서 전송된다. 
때문에 url 상에 ? 뒤에 데이터가 붙어 request 를 보내게 되는 것이다. 이러한 방식은 url 이라는 공간에 담겨가기 때문에 전송할 수 있는 데이터의 크기가 제한적이다.
이에 더해 보안이 필요한 데이터에 대해서도 데이터가 그대로 url 에 노출되므로 적절하지 않을 수 있다.

### POST

<img width="796" alt="image" src="https://github.com/1017yu/Todo-doTalk/assets/83483378/f3a90a80-1207-4e87-9dd5-9bbc0e29df3b">

 POST 방식은 [HTTP Request Message](https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages)의 Body 부분에 데이터가 담겨서 전송된다. POST 방식은 GET 방식과 다르게 데이터들이 URL에 표시되지 않고 HTTP 패킷 Body에 담겨 서버로 데이터가 전송된다. 따라서 보내는 데이터의 양에 제한이 없어 대용량 데이터를 전송할 때는 POST 방식이 적합하다. 그리고 URL에 데이터가 표시가 되지 않기 때문에 GET 방식보다는 상대적으로 보안적이지만, body의 데이터도 결국엔 크롬 개발자 도구, Fiddler와 같은 툴로 요청 내용을 확인할 수 있기 때문에 꼭 암호화를 해주어야 한다.

부수적인 차이점을 좀 더 살펴보자면 GET 방식의 요청은 브라우저에서 Caching 할 수 있다. 때문에 POST 방식으로 요청해야 할 것을 보내는 데이터의 크기가 작고 보안적인 문제가 없다는 이유로 GET 방식으로 요청한다면 기존에 caching 되었던 데이터가 응답될 가능성이 존재한다. 때문에 목적에 맞는 기술을 사용해야 하는 것이다.

브라우저의 캐싱은 웹 페이지를 방문할 때, 웹 서버에서 웹 페이지의 HTML 코드와 이미지 파일 등을 저장하는 것을 일컫는다. 사용자는 웹 페이지를 방문하면, 브라우저는 캐싱된 데이터를 반환하는데,
캐싱된 데이터가 존재하지 않는 경우, 브라우저는 웹 서버에서 데이터를 가져와서 웹 페이지를 생성하는 것이다. 생성된 웹 페이지는 캐싱되고, 사용자의 다음 요청에 사용된다.
이 과정에서 보안 요구가 뛰어난 정보를 포함하여 GET 방식을 요청하면, 의도하지 않게 다른 GET 요청에서 노출이 될 수 있다.


---


## 웹 통신의 큰 흐름

### 브라우저

1. url 에 입력된 값을 브라우저 내부에서 결정된 규칙에 따라 그 의미를 조사한다.
   - 예를 들어, URL에 입력된 쿼리가 q=keyword인 경우, 브라우저는 keyword를 웹 서버에 검색어로 전송.
2. 조사된 의미에 따라 HTTP Request 메시지를 만든다.
3. 만들어진 메시지를 웹 서버로 전송한다.

만들어진 메시지 전송은 브라우저 네트워크에 송출하는 기능이 없으므로 운영체제에 의뢰하여 메시지를 전달한다.  OS에 송신을 의뢰할 때는 도메인명이 아니라 ip주소로 메시지를 받을 상대를 지정해야 하는데, 이 과정에서 DNS서버를 조회한다. 

DNS 서버는 도메인 이름을 IP 주소로 변환하는 역할을 한다. 도메인 이름은 사람이 읽을 수 있는 이름이고, IP 주소는 컴퓨터가 이해할 수 있는 번호이다. 
예를 들어, www.google.com은 도메인 이름이고, 142.250.190.104은 IP 주소라고할 때, DNS 서버는 www.google.com을 142.250.190.104로 변환하는 역할을 한다.

### 프로토콜 스택, LAN 어댑터

1. 프로토콜 스택(운영체제에 내장된 네트워크 제어용 소프트웨어)이 브라우저로부터 메시지를 받는다.
2. 브라우저로부터 받은 메시지를 패킷 속에 저장한다.
3. 그리고 수신처 주소 등의 제어정보를 덧붙인다.
4. 그런 다음, 패킷을 LAN 어댑터에 넘긴다.
5. LAN 어댑터는 다음 Hop의 MAC주소를 붙인 프레임을 전기신호로 변환시킨다.
6. 신호를 LAN 케이블에 송출시킨다.
   
패킷은 네트워크에서 데이터를 전송하는 데 사용되는 작은 데이터 단위로서, 프로토콜 스택은 패킷에 수신처 주소와 기타 제어 정보를 덧붙이게 되는데, 예를 들어 통신 중 오류가 발생했을 때, 이 제어 정보를 사용하여 고쳐 보내거나, 각종 상황을 조절하는 등 다양한 역할을 하게 된다. 

### 허브, 스위치, 라우터
1. LAN 어댑터가 송신한 프레임은 스위칭 허브를 경유하여 인터넷 접속용 라우터에 도착한다.
2. 라우터는 패킷을 프로바이더(통신사)에게 전달한다.
3. 인터넷으로 들어가게 된다.

LAN 어댑터는 컴퓨터와 네트워크를 연결하는 장치로서, 컴퓨터에서 생성된 데이터를 프레임으로 변환하여 네트워크에 전송한다. 프레임에는 수신처 주소와 기타 제어 정보가 포함되어 있다.
스위칭 허브는 네트워크의 여러 장치를 연결하는 장치이다. 스위칭 허브는 프레임을 수신하면, 프레임의 수신처 주소를 확인하여 프레임을 수신처 장치로 전송하게 된다.
라우터는 네트워크의 여러 네트워크를 연결하는 장치이다. 라우터가 프레임을 수신하면, 프레임의 목적지 네트워크를 확인하여 프레임을 목적지 네트워크(프레임의 헤더에 포함)로 전송한다.

### 액세스 회선, 프로바이더
1. 패킷은 인터넷의 입구에 있는 액세스 회선(통신 회선)에 의해 POP(Point Of Presence, 통신사용 라우터)(인터넷 서비스 제공업체 (ISP)가 고객에게 인터넷 서비스를 제공하기 위해 사용하는 장소)까지 운반된다.
2. POP 를 거쳐 인터넷의 핵심부로 들어가게 된다.
3. 수 많은 고속 라우터들 사이로 패킷이 목적지를 향해 흘러가게 된다.

### 방화벽, 캐시서버
1. 패킷은 인터넷 핵심부를 통과하여 웹 서버측의 LAN 에 도착한다.
2. 기다리고 있던 방화벽이 도착한 패킷을 검사한다.
3. 패킷이 웹 서버까지 가야하는지 가지 않아도 되는지를 판단하는 캐시서버가 존재한다.

캐시 서버는 패킷이 웹 서버까지 가야하는지 가지 않아도 되는지를 판단한다. 캐시 서버는 패킷의 헤더를 확인하여, 패킷이 웹 서버에서 제공되는 데이터인지를 확인한다. 
패킷이 웹 서버에서 제공되는 데이터이면, 캐시 서버에 저장된 데이터를 사용자에게 제공하고, 웹 서버에서 제공되는 데이터가 아니면, 패킷을 웹 서버로 전송하여 사용자의 응답 시간을 향상시키고, 웹 서버의 부하를 줄인다.

### 웹 서버
1. 패킷이 물리적인 웹 서버에 도착하면 웹 서버의 프로토콜 스택은 패킷을 추출하여 메시지를 복원하고 웹 서버 애플리케이션에 넘긴다.
2. 메시지를 받은 웹 서버 애플리케이션은 요청 메시지에 따른 데이터를 응답 메시지에 넣어 클라이언트로 회송한다.
3. 왔던 방식대로 응답 메시지가 클라이언트에게 전달된다.


